# Бизнес-логика

## Расчёт свободных денег
1. Берутся все события с типом 'income', 'expense', 'transfer' (status='applied').
2. Суммируются по account_id.
3. Вычитаются обязательства (obligation_create с status='applied').
4. Результат — свободный остаток на счёте.

## Правила событий
- Каждое изменение — новое событие.
- reference_id указывает на событие, которое изменяется/отменяется.
- Только события со status='applied' влияют на расчёты.
